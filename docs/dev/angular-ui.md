# Eclipse Winery Angular UI

## Prerequisites
1. Install [git](https://git-scm.com)
2. Install and setup [Node.js](https://nodejs.org/en/) and [NPM](https://www.npmjs.com) for [Angular4](https://angular.io/docs/ts/latest/quickstart.html)
3. **optional** Install the [Angular-CLI](https://cli.angular.io) globally. 

### Backend
The frontend assumes that the backend server is running on
- the same host,
- the same protocol,
- the same port and
- at `/winery`.
The only exception is when the UI is running on port `3000`, the port is assumed to be `8080`.
Therefore,  an example request to the backend, if it runs locally, looks like this: `http://localhost:8080/winery/servicetemplates`.

## Setup Local Development Server
1. `npm install`
2. `npm start` or `ng serve`
    - be sure that no other application is listening on port 4200
    - if you want to run using `--aot`, run `npm run dev-aot` or `ng serve --aot`
3. Now the server is running on `http://localhost:4200`
    
## Setup Debugging Environment
1. Make sure to use IntelliJ/Webstorm Ultimate in the version 2017.1 or higher
1. Install the [JetBrains Chrome Plugin](https://chrome.google.com/webstore/detail/jetbrains-ide-support/hmhgeddbohgjknpmjagkdomcpobmllji?hl=en)
1. Create a new run configuration in IntelliJ
   1. `Run –> Edit configurations… –> Add –> JavaScript Debug`
   1. Name the configuration `Debug Angular-Ui`
   1. Add `http://localhost:4200` as URL
   1. Choose Browser `Chrome` instead of `default`
   1. Press OK
1. Use the debug button to run the debugger.
1. Now breakpoints can be set anywhere in the code. IntelliJ/Webstorm even shows if the breakpoint is reachable or not by
   showing a hook or a cross in the breakpoint.

**IMPORTANT: always make sure to start the server first! Otherwise the app is not running and therefore not loading
   when running the debugger.**

## TSLint
1. Go to `File -> Settings -> Language and Frameworks -> TypeScript -> TSLint`
2. Set `Enabled` to true
3. Press `OK` 

Usually IntelliJ finds the `tslint.json` automatically, otherwise configure it in the same window yourself.  

### Automatically fix issues
- Use the <kbd>Alt</kbd> + <kbd>Enter</kbd> shortcut to quickly fix TSLint errors by selecting `TSLint: Fix current ...`
- Or you can use the auto fix functionality provided by TSLint. You can do this by running `ng lint --fix`.

## Production Build
After step 3 at setting up local development server do
1. `npm run build` or `ng build`

### API Documentation
The documentation gets build by running `npm run doc`. The generated Documentation can be found at `/doc/index.html`.
It is generated by the comments describing a class/method/member. Examples can be found in the `WineryTableComponent` 
or the `WineryModalComponent`.
    
## Just do Linting
Simply use `npm run lint` or `ng lint`.


## Generate winery-ui.war
Execute `mvn package`.

## Generate winery-ui.war
Execute `mvn package`.


## Development Hints
- [Exiting a for-each loop early](https://stackoverflow.com/a/2641374/6592788) 


## License

Copyright (c) 2017 University of Stuttgart.

All rights reserved. This program and the accompanying materials
are made available under the terms of the [Eclipse Public License v2.0]
and the [Apache License v2.0] which both accompany this distribution.

  [Apache License v2.0]: http://www.apache.org/licenses/LICENSE-2.0.html
  [Eclipse Public License v2.0]: http://www.eclipse.org/legal/epl-v20.html
